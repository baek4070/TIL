# MySQL

## BDMS 개요

### 데이터 베이스의 정의와 특징

- 데이터 베이스
- DBMS

## DB/DBMS의 특징

- 데이터의 무결성(Intergrity)
- 데이터의 독립성
- 보안
- 데이터 중복의 최소화
- 응용프로그램 제작 및 수정이 쉬워짐
- 데이터의 안전성 향상

### 데이터  베이스의 발전

- 오프라인 관리
- 파일 시스템 사용
- 데이터베이스 관리시스템
- SQL(Structured Query Language)

### DBMS 분류

계층형 DBMS

- 망형 DBMS
- 관계형 DBMS(Realational DBMS)

### 관계형 DBMS(Relational DBMS)의 장단점

- 장점
- 단점

### SQL 개요

- SQL(Structured Query Language)

### MySQL의 개요와 변천사

### 상용 에디션

### 무료 에디션

---

## MySQL 설치

---

## MySQL 전체 운영

### 요구사항 분석과 시스템 설계 그리고 모델링

- 정보 시스템 구축 절차 요약
    - -분석, 설계, 구현, 시험 ,유지보수의 5가지 단계
    - 분석
        - 구현하고자 하는 프로젝트의 가장 첫 번째단계
        - 시스템 분석 또는 요구사항 분석이라고 불림
        - 요구사항 분석은 현재 우리가 무엇을 할것인지 결정
        - 사용자의 인터뷰와 업무 조사등을 수행
        - 프로젝트의 첫 단추를 끼우는 중요한 단계
        - 분석의 결과로 많은 문서 작성
    - 설계
        - 시스템 설계 또는 프로그램 설꼐
        - 구축하고자 하는 시스템을 어떻게 할것인지 결정
        - 대부분의 프로젝트에서 분석과 설계의 과정이 전체 공정의 50%이상 차지
- 데이터 베이스 모델링과 필수 용어
    - 데이터베이스 모델링
        - 현실세계에서 사용되는 데이터를 MySQL에 이떻게 옮겨 놓을 것이닞를 결정하는 과정
        - 저장할 정보는 테이블(Table)이라는 형식에 맞춰 저장
        - 쇼핑몰 데이터베이스의 예
    - 데이터
        - 하나하나의 단편적인 정보
        - 정보는 있으나 아직 체계화 되지 못한 상태
    - 테이블
        - 데이터를 입력하기 위해, 표 형태로 표현한 것
        - Ex)회원 정보 테이블 제품 정보 테이블
    - 데이터베이스(DB)
        - 테이블이 저장되는 저장소
        - 각 데이터베이스는 서로 다른 고유한 이름을 가지고 있음
    - DBMS(DataBase Management System)
        - 데이터 베이스를 관리하는 시스템 또는 소프트웨어
    - 열(=컬럼=필드)
        - 각 테이블은 열로 구성
        - 회원 테이블의 경우에는 아이디, 회원이름, 주소 등 3개의 열로 구성
        - 해당 되는 중복되지 않는 열 묶음(합집합)을 도메인 이라고도 한다
    - 열 이름
        - 각 열을 구분하기 위한 이름
        - 열 이름은 각 테이블 내에서는 중복되지 않고 고유해야함
    - 데이터 형식
        - 열의 데이터 형식
        - 테이블을 생성할 떄 열 이름과 함께 지정
    - 행(=로우=레코드) // entity 라고도 함 // 튜플 이라도고 한다
        - 실질적인 데이터
        - 회원 테이블의 경우 4건의 행 데이터, 즉 4명의 회원이 존재함
    - 기본 키(Primary Key) 열
        - 기본 키(또는 주 키) 열은 각 행을 구분하는 유일한 열
        - 중복되어서는 안되며, 비어 있어서도 안 됨
        - 각 테이블에는 기본키가 하나만 지정
        - 한개의 행을 찾아내기 위한 기본값
    - 외래 키 (Foreign Key) 필드
        - 두테이블의 관계를 맺어주는 키
        - 뒤테이블에 의미없는 값을 막아줌
        - a테이블을 참조하고 있는 b 테이블에 잘못된 참조값이 들어가는걸 막을수 있다 이를 참조 무결성이라고 한다, 참조무결성 제약조건 이라고도 합니다
    - SQL(Structured Query Language)
        - 구조화된 질의 언어
        - 사람과 DBMS가 소통하기 위한 말(언어)
    - 제약조건
        - primary key : unique + not null
        - unique : 행 단위의 속성값이 유일
        - null : 빈값 허용
        - not null : 빈값을 허용 안함
        - default :  null 값일떄 기본값을 입력
        - check : 체크하는것

### MySQL을 이용한 데이터베이스 구축 절차

- 데이터베이스 구축/관리 및 활용의 전반적인 절차
    - DBMS설치
    - 스키마 생성
    - 테이블생성
    - 데이터 입력
    - 데이터 조회/ 활용
- 인터넷 쇼핑몰 구축 위한 '쇼핑몰' DB 생성
    - MySQL 서버 연결 및 설정
    - 스키마(Schema) 생성
    - 테이블 생성
- 데이터 입력 - 행 데이터 입력
    - 회원 테이블의 데이터 입력
    - 제품 테이블의 데이터 입력
- 데이터 활용
    - 주로 SELECT 문 사용해 데이터 활용
    - 사용할 데이터 베이스 선택
    - SQL 실행법
    - SQL은 대소문자 구별 없음
    - SELECT 열 이름 FROM 테이블 이름[WHERE 조건]
    - 새로운 테이블 생성
    - 테이블 삭제

### 테이블 외의 데이터 베이스 개체의 활용

- 인덱스 (Index)
    - 데이터베이스 '튜닝'의 개념
        - 데이터베이스 성능 향상
        - 쿼리에 응답하는 시간 단축시키는 것
    - 책 뒤에 붙어 있는 '찾아보기'(또는 색인)와 같은 개념
    - 데이터의 향이 많을수록 효과적으로 작용
        - 응답속도가 현저히 차이 나는 결과
    - 테이블의 열 단위에 생성
- 뷰(View)
    - 가상의 테이블
    - 실제 행 데이터를 가지고 있지 않음
        - 그 실체는 없는것이며, 진짜 테이블에 링크 된 개념
        - 뷰를 SELECT : 진짜 테이블의 데이터를 조회하는 것과 동일한 결과
- 스토어드 프로시저(Stored Procedure)
    - MySQL에서 제공해주는 프로그래밍 기능
    - SQL문을 하나로 묶어 편리하게 사용하는 기능
    - 다른 프로그래밍 언어와 같은 기능을 담당할 수도 있음
        - 실무에서는 SQL문(주로 SELECT)을 매번 하나하나 수행 X
        - 스토어드 프로시저로 만들어 놓은 후 스토어드 프로시저 호출
- 트리거(Trigger)
    - 테이블에 부착되어 테이블에 INSERT나 UPDATE 또는 DELETE 작업이 발생되면 실행되는 코드
    - ex) 탈퇴회원 관리
        - 회원 테이블에서 뺴서 타로티한 회원 관리 테이블로 옮김
        - 회원 정보 + 탈퇴한 날짜를 관리하는 새테이블의 필요성

### 데이터베이스 백업 및 관리

- 백업과 복원
    - 백업
        - 현재의 데이터 베이스르 ㄹ다른 매체에 보관하는 작업
    - 복원
        - 데이터 베이스에 문제 발생 시 다른 매체에 백업된 데이터를 이용해 원상태로 돌려놓는 작업
    - 백업과 복원은 DBA(DataBasese Administrator) : 가 해야할 가장 중요헌 알
- 데이터베이스 백업
    - 백업용 폴더 작성 : 실제로는 다른 디스크에 이루어져야 의미 있음
    - DB 백업
        - DB내의 모든 트리거, 스토어드, 프로시저 까지 백업
        - 백업 폴더에 백업 파일 저장
- 데이터 베이스 복구
    - DB 삭제 같은 큰사고를 인위로 발생시켜 실습
    - 복원 후 데이터가 온전한지 check 하는것이 중요함
    
    ---
    

## SQL 기본

### SELECT문

- <\SELECT... FROM>
    - 원하는 데이터를 가져와 주는 기본적인 구문
    - 가장 많이 사용되는 구문
    - 데이터베이스 내 테이블에서 원하는 정보 추출하는 명령
- USE 구문
    - SELECT문 학습 위해 사용할 데이터베이스 지정
    - 지정해 놓은 후 특별히 다시 USE문 사용하거나 다른 DB를 사용하겠다고 명시하지 않는 이상 모든 SQL문은 지정DB에서 수행
    - employees를 사용하기 위해서는 쿼리창에 다음과 같이 입력한다. : `USE employees`
    - Workbnech에서 직접 선택해서 사용도 가능
- SELECT와 FROM
    - SELECT * // 특별히 열 이 지정되지 않았을떄
    - SELECT 열 이름
        - 테이블에서 필요로하는 열만 가져오기 가능
        - 여러개의 열을 가져오고 싶을 떄는 콤마로 구분
        - 열이름 순서는 출력하고 싶은 순서대로 배열 가능
    - 주석(Remakr)
        - --
        - /\*내용*/
- DB, TABLE, 열의 이름이 확실하지 않을 때 조회하는 방법
    - 현재 서버에 어떤 DB가 있는지 보기
        - `SHOW DATABASES;`
    - 현재 서버에 어떤 TABLE이 있는지 보기
        - `SHOW TABLE STATUS;` : 데이터 베이스에 있는 테이블 정보 조회
        - `SHOW TABLES;` : 테이블 이름만 간단히 보기
    - employees 테이블의 열이 무엇이 있는지 확인
        - DESCRIBE employees; 또는 DESC employees;
    - Workbench의 \[Navigator]로 확인 가능하나 명령어를 알아두면 Linux 명령어 모드 사용가능
- 특정 조건의 데이터만 조회 - <\SELECT ... FROM ... WHERE>
    - 기본적인 WHERE절
        - 조회하는 결과에 특정한 조건을 줘서 워하는 데이터만 보고 싶을 때 사용
        - SELECT 필드 이름 FROM 테이블이름 WHERE 조건식;
    - 관계 연사자의 사용
        - OR
        - AND
        - 조건 연산자(=, <, > ......) 와 관계 연산자를 조합하여 데이터를 효율적으로 추출 가능
    - BETWEEN...AND와 IN() 그리고 LIKE
        - 데이터가 숫자로 구성되어 있으며 연속적인 값 : BETWEEN...AND사용
        - 이산적인(Discrete)값의 조건 : IN() 사용
        - 문자열의 내용 검색 : LIKE 사용(문자뒤에 %- 무엇이든 허용, 한 글자와 매치 '_' 사용)
- ANY/ALL/Some, 서브쿼리(SubQuery, 하위쿼리)
    - 서브쿼리
        - 쿼리문 안에 또 쿼리문이 들어 있는 것
        - ex)김경호 보다 키가 크거나 같은 사람의 이름과 키 출력
        - 서브쿼리의 결과가 둘 이상이 되면 에러 발생
    - ANY
        - 서브쿼리의 여러 개의 결과 중 한 가지만 만족해도 가능
        - SOME은 ANY와 동일한 의미로 사용
        - '= ANY(서브쿼리)' 는 'IN(서브쿼리)'와 동일한 의미
        - OR과 유사
    - ALL
        - 서브쿼리의 결과 중 여러 개의 결과를 모두 만족해야 함
        - AND과 유사
- 원하는 순서대로 정렬하여 출력 : ORDER BY
    - ORDER BY절
        - 결과물에 대해 영향을 미치지는 않고 출력되는 순서를 조절하는 구문
        - 기본적으로 오름차순 정렬
        - 내림차순 으로 정렬하려면 열 이름 뒤에 DESC]
        - ASC는 디폴트 값이므로 생략 가능
    - 중복된것은 하나만 남기는 DISTINCT
        - 중복된 것을 골라서 세기 어려울 떄 사용하는 구문
        - 테이블의 크기가 클수록 효율적
        - 중복된 것은 1개씩만 보여주면서 출력
    - 출력하는 개수를 제한하는 LIMIT
        - 일부를 보기 위해 여러 건의 데이터를 출력하는 부담 줄임
        - 상위의 N개만 출력하는 'LIMIT N' 구문 사용
        - 개수의 문제보다는 MySQL의 부담을 많이 줄여주는 방법
    - 테이블을 복사하는 CREATE TABLE ... SELECT
        - 테이블을 복사해서 사용할 경우 주로 사용
        - CREATE TABLE 새로운 테이블 (SELECT 복사할 열 FROM 기존 테이블)
        - 지정한 일부 열만 복사하는 것도 가능
        - PK 나 FK 같은 제약 조건은 복사되지 않음
- GROUP BY 및 HAVING 그리고 집계 함수
    - GROUP BY절
        - 그룹으로 묶어주는 역할
        - 집계 함수(Aggregate Function)와 함께 사용
            - 효율적인 데이터 그룹화 (Grouping)
            - ex) 각 사용자 별로 구매한 개수를 합쳐 출력
        - 읽기 좋게 하기위해 별칭(AS) 사용